<html>
<head>
  <title>Bomberman-maze</title>
  <style>
    #player1, #player2 {
      margin: 10px;
      float: left;
    }
  </style>
</head>
<body>
  <h1>Bomberman-maze</h1>
  <div id="game">
    <div id="player1">
      <h2> Player 1</h2>
      <canvas id="p1Canvas" width="400px" height="600px" style="border:1px solid black;">
        You don't have a canvas?!
      </canvas>
    </div>
    <div id="player2">
      <h2> Player 2 </h2>
      <canvas id="p2Canvas" width="400px" height="600px" style="border:1px solid black;">
        You don't have a canvas?!
      </canvas>
      </div>
  </div>
  <canvas id="debugCanvas" width="840px" height="600px" style="border:1px solid black;">
    You don't have a canvas?!
  </canvas>


  <script type="text/javascript" src="/lib/configs.js"></script>
  <script type="text/javascript" src="/lib/util.js"></script>
  <script type="text/javascript" src="/lib/Map.js"></script>
  <script type="text/javascript" src="/lib/Player.js"></script>
  <script type="text/javascript" src="/lib/Game.js"></script>
  <script type="text/javascript" src="/lib/View.js"></script>

  <script type="text/javascript">
    var tileImg = new Image();
    tileImg.src = game_configs["tilesImg"];
    var view1 = new View(document.getElementById(game_configs["p1Canvas"]),
                         { viewX: game_configs["p1Start"].x-1,
                           viewY: game_configs["p1Start"].y-1});
    var view2 = new View(document.getElementById(game_configs["p2Canvas"]),
                         { viewX: game_configs["p2Start"].x-1,
                           viewY: game_configs["p2Start"].y-1});
    var viewDebug = new View(document.getElementById("debugCanvas"),
                         { viewX: 0,
                           viewY: 0});

    var game;
    tileImg.onload = function () {
        game = new Game(game_configs["numPlayer"], tileImg,{});
        game.initialize(view1, view2);
        game.start(game_configs["fps"]);
    }

    var keyboardCapture = document.getElementById("game");
    function onKeyup (event) {
        console.log(event.keyCode+" registered.");
        game.keyQueue.push(event.keyCode);
    };
    document.addEventListener('keyup', onKeyup, false);



  </script>
</body>
</html>
